<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <title>Bridgy</title>
  <link href="/static/style.css" rel="stylesheet" type="text/css" />
</head>

<body>

{# TODO: javascript to set browser location to / so that reloads are harmless #}

<div class="messages">
{% for msg in msgs %}
  <p>{{ msg }}</p>
{% endfor %}
</div>

<div id="navbar">
  <p> 
  {% if user %}
    {{ nickname }} | <a href="{{ logout_url }}">Sign out</a>
  {% else %}
    <a href="/register">Sign in</a>
  {% endif %}
  </p>
</div>

<div id="header">
  <img id="logo" src="/static/bridgy_logo.jpg" />
  <p id="title"><span>Bridgy</span></p>
</div>

<div id="body">

<p>Got a blog? Share your blog posts on social networks? Wish comments on those
shared posts also showed up on your blog? Bridgy can help.</p>

{% if user %}
  <p><b>Your sources:</b></p>
  <ul>
  {# TODO: paging #}
  {% for source in sources %}
    <li>
      <a href="{{ source.url }}">
        <img src="{{ source.pic_small }}" />
        {{ source.display_name }}</a>
      ({{ source.type_display_name }})

      <!-- TODO: make this generic across source types. need unique id across
           all source types, and way to look it up. (webfinger.) same w/dests.
           -->
      <form method="post" action="/facebook/delete">
        <input name="name" type="hidden" value="{{ source.key.name }}" />
        <input type="image" src="static/red_x.png" title="Delete" />
      </form>
    </li>
  {% endfor %}
  </ul>

  <form method="post" action="/facebook/add">
    <input type="submit" value="Add Facebook source">
  </form>
  <br />

  <p><b>Your destinations:</b></p>
  <ul>
  {% for dest in dests %}
    <li>
      <a href="{{ dest.url }}">{{ dest.display_name }}</a>
      ({{ dest.type_display_name }})

      <form method="post" action="/wordpress/delete">
        <input name="name" type="hidden" value="{{ dest.key.name }}" />
        <input type="image" src="static/red_x.png" title="Delete" />
      </form>
    </li>
  {% endfor %}
  </ul>

  <form method="post" action="/wordpress/add">
    <table><tr><td>
          <label for="xmlrpc_url">Base URL</label>
        </td><td>
          <input id="url" name="url" type="text" />
      </td></tr><tr><td>
          <label for="xmlrpc_url">XMLRPC URL</label>
        </td><td>
          <input id="xmlrpc_url" name="xmlrpc_url" type="text" />
      <!-- not needed, posting comments anonymously instead. (otherwise
           logged in wordpress user would override commenter name and url.) -->
      <!--
      </td></tr><tr><td>
          <label for="username">Admin username</label>
        </td><td>
          <input id="username" name="username" type="text" />
      </td></tr><tr><td>
          <label for="password">Password</label>
        </td><td>
          <input id="password" name="password" type="password" />
      -->
    </td></tr></table>
    <input type="submit" value="Add Wordpress destination">
  </form>

{% else %}
  <p>Please <a href="/register">sign in</a>.</p>
{% endif %}
</div>

<div id="bottom"></div>

<div id="footer">
  <a href="http://snarfed.org/about">Questions?</a>
  | <a href="http://code.google.com/appengine/">
      <img src="/static/appengine_button_noborder.gif" /></a>
</div>

</body>
</html>

